{% extends "base.html" %}
{% block title %}Adopt-a-Pet - Find Your Perfect Pet{% endblock %}

{% block content %}
<div class="max-w-2xl mx-auto text-center mt-12">
    <h1 class="text-4xl font-bold text-gray-800 mb-4">Find Your Perfect Pet</h1>
    <p class="text-gray-600 mb-8">
        Search by describing your ideal pet or upload a photo to find similar ones.
        Powered by CLIP cross-modal embeddings and Elasticsearch.
    </p>

    {% if error %}
    <div class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded mb-6">
        {{ error }}
    </div>
    {% endif %}

    <!-- Text Search -->
    <form action="/search" method="get" class="mb-8">
        <div class="flex gap-2">
            <input
                type="text"
                name="q"
                placeholder="e.g., playful ginger cat, friendly dog for families..."
                class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-lg"
                autofocus
            >
            <button
                type="submit"
                class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 font-medium"
            >
                Search
            </button>
        </div>
    </form>

    <!-- Example Queries -->
    <div class="mb-10">
        <p class="text-sm text-gray-500 mb-2">Try these:</p>
        <div class="flex flex-wrap justify-center gap-2">
            {% for example in ["playful ginger cat", "large friendly dog", "small kitten", "golden retriever puppy", "black and white cat"] %}
            <a
                href="/search?q={{ example }}"
                class="px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm hover:bg-indigo-100 hover:text-indigo-700 transition"
            >
                {{ example }}
            </a>
            {% endfor %}
        </div>
    </div>

    <!-- Divider -->
    <div class="flex items-center gap-4 mb-8">
        <hr class="flex-1 border-gray-200">
        <span class="text-gray-400 text-sm">OR</span>
        <hr class="flex-1 border-gray-200">
    </div>

    <!-- Image Upload -->
    <form action="/search/image" method="post" enctype="multipart/form-data">
        <div class="border-2 border-dashed border-gray-300 rounded-lg p-8 hover:border-indigo-400 transition">
            <p class="text-gray-600 mb-4">Upload a pet image to find similar pets</p>
            <input
                type="file"
                name="file"
                accept="image/*"
                class="block mx-auto text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-indigo-50 file:text-indigo-700 hover:file:bg-indigo-100"
                required
            >
            <input type="hidden" name="top_k" value="20">
            <button
                type="submit"
                class="mt-4 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-medium"
            >
                Search by Image
            </button>
        </div>
    </form>
</div>
{% endblock %}
